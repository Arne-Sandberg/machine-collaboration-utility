{"version":3,"sources":["modules/Bots/Settings/index.js"],"names":[],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEe,MAAM,QAAN,SAAuB,gBAAM,SAA7B,CAAuC;AACpD,cAAY,KAAZ,EAAmB;AACjB,UAAM,KAAN;;AAEA,SAAK,iBAAL,GAAyB,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAK,SAAL,GAAiB,KAAK,SAAL,CAAe,IAAf,CAAoB,IAApB,CAAjB;AACD;;AAED,oBAAkB,KAAlB,EAAyB;AACvB,UAAM,cAAN;AACA,QAAI,SAAS,qBAAQ,GAAR,CAAa,aAAW,KAAK,KAAL,CAAW,GAAX,CAAe,QAAf,CAAwB,IAAK,GAArD,CAAb;AACA,uBAAoC,qBAAE,KAAF,CAAQ,KAAK,KAAL,CAAW,GAAX,CAAe,QAAvB,CAApC,EAAsE;AAAA;;AAAA,YAA1D,UAA0D;AAAA,YAA9C,OAA8C;;AACpE,YAAM,YAAY,EAAlB;AACA,UAAI,MAAM,MAAN,CAAa,UAAb,MAA6B,SAAjC,EAA4C;AAC1C,kBAAU,UAAV,IAAwB,MAAM,MAAN,CAAa,UAAb,EAAyB,KAAjD;AACA,iBAAS,OAAO,IAAP,CAAY,SAAZ,CAAT;AACD;AACF;AACD,aAAS,OAAO,GAAP,CAAW,QAAX,EAAqB,kBAArB,CAAT;AACA,QAAI;AACF,aAAO,GAAP;AACD,KAFD,CAEE,OAAO,EAAP,EAAW;AACX,cAAQ,GAAR,CAAa,cAAb,EAA4B,EAA5B;AACD;AACF;;AAED,uBAAqB;AACnB,UAAM,WAAW,EAAjB;AACA,wBAAoC,qBAAE,KAAF,CAAQ,KAAK,KAAL,CAAW,GAAX,CAAe,QAAvB,CAApC,EAAsE;AAAA;;AAAA,YAA1D,UAA0D;AAAA,YAA9C,OAA8C;;AACpE,cAAQ,UAAR;AACE,aAAM,WAAN;AACA,aAAM,WAAN;AACA,aAAM,MAAN;AACA,aAAM,IAAN;AACA,aAAM,OAAN;AACE;AACF,aAAM,UAAN;AACE,cAAI,OAAO,OAAP,MAAqB,OAAzB,EAAiC;AAC/B;AACD;AACH;AACE,mBAAS,IAAT,CAAc,KAAK,kBAAL,CAAwB,UAAxB,EAAoC,OAApC,CAAd;AAZJ;AAcD;AACD,aAAS,IAAT,CAAc,yCAAO,MAAK,QAAZ,EAAqB,OAAM,SAA3B,GAAd;AACA,WACE;AAAA;AAAA,QAAM,UAAU,KAAK,iBAArB;AACG;AADH,KADF;AAKD;;AAED,qBAAmB,UAAnB,EAA+B,OAA/B,EAAwC;AACtC,WACE;AAAA;AAAA,QAAK,KAAK,UAAV;AACE;AAAA;AAAA,UAAO,KAAM,IAAE,UAAW,QAA1B,EAAkC,SAAS,UAA3C;AAAwD;AAAxD,OADF;AAEE,+CAAO,KAAM,IAAE,UAAW,QAA1B,EAAkC,MAAK,UAAvC,EAAkD,MAAM,UAAxD,EAAoE,cAAc,OAAlF;AAFF,KADF;AAMD;;AAED,cAAY;AACV,yBAAQ,MAAR,CAAgB,aAAW,KAAK,KAAL,CAAW,GAAX,CAAe,QAAf,CAAwB,IAAK,GAAxD,EACC,GADD;AAED;;AAED,WAAS;AACP,UAAM,eAAe,KAAK,kBAAL,EAArB;AACA,WACE;AAAA;AAAA;AACE;AAAA;AAAA;AAAA;AAAA,OADF;AAEG,kBAFH;AAGE;AAAA;AAAA,UAAQ,SAAQ,QAAhB,EAAyB,SAAS,KAAK,SAAvC;AAAA;AAAA;AAHF,KADF;AAOD;AA3EmD;kBAAjC,Q","file":"modules/Bots/Settings/index.js","sourcesContent":["import React from 'react';\nimport request from 'superagent';\nimport _ from 'underscore';\nimport Button from 'react-bootstrap/lib/Button';\n\nexport default class Settings extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.updateBotSettings = this.updateBotSettings.bind(this);\n    this.deleteBot = this.deleteBot.bind(this);\n  }\n\n  updateBotSettings(event) {\n    event.preventDefault();\n    let update = request.put(`/v1/bots/${this.props.bot.settings.uuid}`)\n    for (const [settingKey, setting] of _.pairs(this.props.bot.settings)) {\n      const paramJson = {};\n      if (event.target[settingKey] !== undefined) {\n        paramJson[settingKey] = event.target[settingKey].value;\n        update = update.send(paramJson);\n      }\n    }\n    update = update.set('Accept', 'application/json');\n    try {\n      update.end();\n    } catch (ex) {\n      console.log(`Update error`, ex);\n    }\n  }\n\n  renderSettingsForm() {\n    const settings = [];\n    for (const [settingKey, setting] of _.pairs(this.props.bot.settings)) {\n      switch (settingKey) {\n        case `createdAt`:\n        case `updatedAt`:\n        case `uuid`:\n        case `id`:\n        case `model`:\n          break;\n        case `endpoint`:\n          if (String(setting) === `false`) {\n            break;\n          }\n        default:\n          settings.push(this.renderSettingInput(settingKey, setting));\n      }\n    }\n    settings.push(<input type=\"submit\" value=\"Update!\"/>);\n    return (\n      <form onSubmit={this.updateBotSettings}>\n        {settings}\n      </form>\n    );\n  }\n\n  renderSettingInput(settingKey, setting) {\n    return (\n      <div key={settingKey}>\n        <label key={`${settingKey}label`} htmlFor={settingKey}>{settingKey}</label>\n        <input key={`${settingKey}input`} type=\"textarea\" name={settingKey} defaultValue={setting}/>\n      </div>\n    );\n  }\n\n  deleteBot() {\n    request.delete(`/v1/bots/${this.props.bot.settings.uuid}`)\n    .end();\n  }\n\n  render() {\n    const settingsForm = this.renderSettingsForm();\n    return (\n      <div>\n        <h3>Settings</h3>\n        {settingsForm}\n        <Button bsStyle=\"danger\" onClick={this.deleteBot}>Delete Bot</Button>\n      </div>\n    );\n  }\n}\n"],"sourceRoot":"/source/"}